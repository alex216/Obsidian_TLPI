- プロセスグループは「関係を持つ」プロセスを元とする集合
- セッションは「関係を持つ」プロセスグループを元とする集合
- この二つは、シェルのジョブコントロール機能を実現させるための抽象概念
	- シェルはコマンドをfg,bg実行する
- 34.1 概要 ^67b2c8
	- プロセスリーダ
		- プロセスIDはプロセスグループIDになる
	- 新規プロセスのプロセスグループIDは親プロセスから受け継ぐ
	- プロセスがプロセスグループから外れる時は
		- プロセス終了
		- 他のプロセスグループへ移動した時
	- セッションはプロセスグループの集合
		- セッション内の全プロセスは同じ制御端末を共有
			- 制御端末はセッションリーダが最初にオープンした端末
			- 端末は同時に複数セッションの制御端末にはなれない
		- セッション内のプロセスグループのうち同時に端末のフォアグラウンドプロセスグループになれるのは１つだけ
		- 制御端末からの入力を読み取れるのはフォアグラウンドプロセス内のプロセス
		- ユーザ入力で発生するシグナルは、フォアグラウンドプロセスグループ内全プロセスに送られる
			- `SIGINT` : 割り込み（interrupt）キー Ctrl-C
			- `SIGQUIT` : 終了（quit）キー Ctrl-\
			- `SIGTSTP`一時終了（suspend）キー Ctrl-Z
		- 制御端末と接続確立すると、セッションリーダがその端末の制御プロセスとなる（重要）
		- 接続切断時はカーネルが制御プロセスへ`SIGHUP`シグナルを送信する
	- セッション、プロセスグループの主な用途はシェルのジョブコントロール
	- インタラクティブログインの場合
		- 制御端末　：　ログイン端末
		- 制御プロセス　：　ログインシェル
	- パイプはプロセスグループが一つ、複数プロセスつくられる
	- 末尾に&をつけるコマンドやパイプライン
		- バックグラウンドプロセスグループ
	- 付加しなければ
		- フォアグラウンドプロセスグループ
	- プロセスグループが持つ２つの重要かつ有用な性質
		- 親プロセスはプロセスグループ内のどの子プロセスでも`wait`できる [[26章 子プロセスの監視#^052e0b|26.1.2 waitpid()システムコール]]
		- プロセスグループ内の全プロセスへシグナルを送信できる[[20章 シグナル：基礎#^0e3b24|20.5 シグナルの送信：kill()]]
	- ![[Pasted image 20240318145203.png]]
- 34.2 プロセスグループ ^e8230d