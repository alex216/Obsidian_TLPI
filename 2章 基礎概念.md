- 2.7 プロセス ^650808
	- プロセスレイアウト
		- テキストセグメント　（実行コード）
		- データセグメント　（static変数）
		- ヒープセグメント
		- スタックセグメント
	- プロセスの作成と終了
		- プロセスは新規プロセスを`fork()システムコール`より作成
		- テキストセグメントは読み取り専用とマークされ共有
		- `execve()システムコール`はプロセスレイアウトを全て破棄する
	- プロセスIDと親プロセスID
		- プロセスはこの二つを保持する
	- プロセスの終了と終了ステータス
		- `exit()ライブラリ関数`,`_exit()システムコール`かシグナルによる強制終了の２通り
		- 終了ステータス（termination status）を生成する
		- `wait()システムコール`より親プロセスは終了ステータスを取得できる
		-  終了コードは`_exit()`の引数のみを指す
	- プロセスのユーザIDとグループID（権限）
		- 実ユーザID、実グループID
			- プロセスが属する
		- 実効ユーザID、実効グループID
			- 通常は実IDに一致。ファイルやIPCオブジェクトなど
		- 追加グループID
			- その他の親プロセスから受け継ぐグループID
	- 特権プロセス
		- UNIX
			- 実効ユーザIDが０のプロセスを特権プロセス
			- ０以外は非特権プロセス
			- 特権プロセスの作成
				- 特権プロセスからのプロセス作成
				- set-user-IDでプロセス実効ユーザIDをプログラムファイルオーナーに一致させる
	- ケーパビリティ
		- Linuxカーネルver2.2より導入された特権の細分化
		- スーパユーザのみが実行可能な処理でもケーパビリティを有効にしたプロセスなら実行できる
	- initプロセス
		- カーネルは/sbin/initのプログラムからinitプロセスを作る
		- 全てのプロセスの親プロセス
		- PIDは１
		- スーパーユーザ権限で動作
		- 終了不可、シャットダウン時のみに終了する
	- デーモンプロセス
		- 長い寿命
		- システム起動時からシャットダウンまで動作
		- バックグラウンド動作
		- データ読み書きの制御端末がない
	- 環境リスト
		- 親子間IPCとしても使える
		- `exec()`で置換が起こると、
			- 親プロセスから受け継ぐか
			- `exec()`で指定できる
	- リソース消費制限
		- `setrlimit()システムコール`でソフト、ハードリミットを設定する
			- ソフトリミット：プロセスの上限
			- ハードリミット：ソフトリミットの変更可能範囲の上限
		- 非特権プロセス
			- ソフトリミット：変更可能
			- ハードリミット：下方変更のみ
		- シェルの制限変更は`ulimitコマンド`,Cシェルでは`limitコマンド`
			- シェルのリソース消費制限設定はそのシェルから実行する全プロセスに受け継がれる
- 2.10 プロセス間通信と同期 ^8a2e7d
	- signal
	- pipe,FIFO
	- socket
	- ファイルロック
		- 指定した範囲のファイル内容のほかプロセスによるRWを禁止
	- メッセージキュー
		- データパケット（メッセージ）交換
	- セマフォ
		- 実行の同期
	- 共有メモリ
		- 特定のメモリ領域の共有
	- FIFOはSystem V発祥、ソケットはBSD発祥、現代のUNIXは両方実装している
- 2.11 シグナル ^44d3fc
	- シグナルを送信する存在
		- カーネル
			- キーボードからの割り込みキー
			- 子プロセスの終了
			- タイマ（アラームクロック）が終了
			- 不正なメモリアドレスアクセス
		- 自プロセスor他プロセス
	- シェルからは`kill()コマンド`,プログラム内からは`kill()システムコール`
	- シグナルの対応動作
		- 無視
		- 強制終了
		- 一時停止
	- 任意の対応動作をするシグナルハンドラ関数を定義できる
	- シグナルマスクでプロセス側でブロックすることも可能
- 2.12 スレッド ^a7550c
	-  データやヒープの共有
	- ローカル変数や関数コールリンケージ情報を置くスタックは個別
	- 共有されるグローバル変数で通信可能
	- 共有変数へのアクセスの動機を実現する条件変数：mutex
	- IPCや[[#^8a2e7d|2.10]]の同期でも通信可能