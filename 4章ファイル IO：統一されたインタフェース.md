- （はじめに）
	- 最初にfdの説明
	- 次に universal I/O modelの説明
		- 統一されたIOインターフェースを実現するシステムコール
	- 主にディスク上のファイルについて解説
		- パイプや端末等全種類のファイルに共通する
	- [[5章ファイルIO：詳細]]で詳細解説
	- バッファリングという複雑な一面がある
		- [[13章 IOのバッファリング]]
			- カーネルとsdioライブラリでのIOバッファリングを解説
- 4.1 概要 ^3fa616
	- `freopen()ライブラリ関数`で`stdin`,`stdout`,`stderr`を変更可能
	- 基礎システムコールは４つ
		- `open()`
		- `read()`
		- `write()`
		- `close()`
- 4.2 統一されたインタフェース ^c59f74
	- インターフェイスが統一されている
	- 統一モデルから外れる特殊な機能を利用する場合は、`ioctl()システムコール`を使う
- 4.3 ファイルのオープン：`open()` ^79012a
	- シンボリックリンクの場合は参照先ファイルを開く
	- ファイルパーミッションの決定要因
		- mode
		- プロセスのumask()
		- 親ディレクトリのACL
	- `open()`が返すfd
		- SUSv3は最小使用可能fdを返す
	- 4.3.1 `open()`へ与えるフラグ ^fcbbfb
		- ファイルアクセスモードフラグ　３つのうち１つ指定
		- ファイル作成フラグ　`open()`の動作制御、参照不可
		- (オープン)ファイルステータスフラグ
			- `fcntl()`で変更・参照可能
		- LinuxVer 2.6.22から`/proc/PID/fdinfo`
		- `O_APPEND`
			- [[5章ファイルIO：詳細#^d8e3d3|5.1 アトミック動作と競合状態]]
		- `O_ASYNC`
			- シグナル（ドリブン）IO ([[63章 高度なIOモデル#^7a9dbe|63.3シグナルドリブンIO]])
				- FIFO,ソケットなど特定種類のファイルのみ使用可能
				- SUSv3では定義されていない
					- UNIXで同義のFASYNCがある
				- Linuxでは代わりに`fcntl()`の`F_SETFL`を使う
					- [[5章ファイルIO：詳細#^c47b87|5.3 オープンファイルステータスフラグ]]
		- `O_CLOEXEC(Linux 2.6.23以降)`
			- ([[27章 プログラムの実行#^1cda82|27.4 ファイルディスクリプタとexec()]])
			- `fcntl()`の`F_GETFD`,`F_SETFD`の代わりになる
			- 解説
				- １スレッドが
					- `open()`->close-on-execフラグセット
				- ２番スレッドが
					-　`fork()`後`exec()`すると、
				オープン済みfdを意図せず他プログラムへ与えてしまう
		- `O_CREAT`
			- 開こうとしてなかったら作る
		- `O_DIRECT`
			- [[13章 IOのバッファリング#^a66c2b|13.6 バッファリングを無効にする：DirectIO]]
			- 機能検査マクロ`_GNU_SOURCE`の定義が必要
		- `O_DIRECTORY`
			- directoryじゃなかったらerrno=`ENOTDIR`
			- [[18章 ディレクトリとリンク#^9c707a|18.8 ディレクトリの読み取り：opendir(),readdir()]]
			- 機能検査マクロ`_GNU_SOURCE`の定義が必要
		- `O_DSYNC(Linux 2.6.33以降)`
			- 常に同期IOにする
			- カーネルのIOバッファリングについて
				- [[13章 IOのバッファリング#^f76ae4|13.3 カーネルバッファのフラッシュ]]
		- `O_EXCL`
			- `O_CREAT`と使う。開こうとしてなかったらerrno=`EEXIST`
				- `open()`したプロセスこそがこのファイルを作成したプロセスであると保証
			- ファイルが存在するかをアトミックに確認できる
			- 詳細は [[5章ファイルIO：詳細#^d8e3d3|5.1 アトミック動作と競合状態]]
			- シンボリックリンクの場合は`EEXIST`エラー
				- SUSv3ではセキュリティ対策としてこれを要求
				- システムディレクトリ等指定した場所以外での作成を阻止する
		- `O_LARGEFILE`
			- 32bitでのlarge file使用時に用いる
			- SUSv3では定義されていない
			- Alpha,IA-64等64bitでは無視される
			- 詳細は[[5章ファイルIO：詳細#^e60d69|5.10 large fileのIO]]
		- `O_NOATIME(Linux 2.6.8以降)`
			- ファイル最終アクセス時刻を更新しない